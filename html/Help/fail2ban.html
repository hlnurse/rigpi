<!DOCTYPE html>
<html>
<head>
   <title>Other Programs &gt; Fail2Ban</title>
   <meta name=viewport content="width=device-width, initial-scale=1">
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />   
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta name="description" content="Fail2ban, included with RigPi is an open-source intrusion prevention software that helps protect Linux-based systems from malicious attacks by monitoring log files and..." />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <link type="text/css" href="custom.css" rel="stylesheet" />

   <style TYPE="text/css" media="screen"> 
      html, body { margin:0; 
        padding:0; 
        background: #ffffff; 
      } 
      div#printheader { display: none; }
      #idheader { 
        width:100%; 
        height:auto; 
        padding: 0; 
        margin: 0;
        position: fixed;
        top: 0;
        z-index: 2;
      } 
      /* The "min-height" for "#idheader table" ensures that the (blue) header of the topic
         has at least the same height as the header of the navigation panel left of it */
      #idheader table { background: #2C5D88; min-height: 59px }             
      #idheader h1 span { color: #FFF }     
      #idnav {
        text-align: right;
        width: 158px;
        vertical-align: middle;        
      } 
      #idnav a { text-decoration: none }
      #idnav span {
        display: inline-block;
        width: 24px;
        height: 24px;
        margin-left: 4px;
        background:url('hm_webhelp_buttons_grey.png') top left no-repeat;
      } 
      #idnav a span {
        background-image:url('hm_webhelp_buttons_white.png');
      } 
      #idnav a span:hover {
        background-image:url('hm_webhelp_buttons_orange.png');
      } 
      #idnav span.hmbtnprev { background-position: 0 -32px }
      #idnav span.hmbtnnext { background-position: -24px -32px }
      #idnav span.hmbtntop  { background-position: -48px -32px }
      #idnav span.hmbtntoggle  { width: 20px; background-position: -70px -32px }
      #idnav span.hmbtnprint  { background-position: -88px -32px }

      #callout-table, #overview-table {display:block; position:relative; top:0; left:0;}
      #callout-icon {display:block; position:absolute; top:-11px; left:-11px;}
      #callout-icon-flag {display:block; position:absolute; top:-11px; left:-8px;}
      #callout-table a {text-decoration: none; color: blue;}
      #callout-table a:visited {text-decoration: none; color: blue;}
      #overview-table a {text-decoration: none; color: black;}
      #overview-table a:visited {text-decoration: none; color: black;}
      #callout-table a:hover, #overview-table a:hover {text-decoration: underline;}       
      p.help-url { margin: 20px 0 5px 0; text-align: center; font-size: 80%; text-decoration: none }      
      #switchtoggles { text-align: right; padding: 0 2px 0 0; font-size: 90%; } 
      .sync-toc { color: #FFF; font-size: 8pt; font-weight: bold; display: none; }
      .sync-toc a { color: #FFF; text-decoration: none; font-weight: bold;}
      .sync-toc a:visited { color: #FFF; }
      .sync-toc a:hover { text-decoration: underline; }
      a.hmanchor { display: inline-block; margin-top: 4em; padding-top: 4em }	  
   </style>
   <style TYPE="text/css" media="print">
      div#idheader, img.dropdown-toggle-icon, p.help-url { display:none } 
   </style>
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript">
     HMSyncTOC("RigPi.html", "fail2ban.html");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body>


<div id="printheader"><h1 class="p_Heading1" style="page-break-after: avoid;"><span class="f_Heading1">Fail2Ban</span></h1>
</div>
<div id="idheader">
<div id="idheaderbg">
<table style="width:100%;border:none;margin:0px;" cellspacing="0" cellpadding="0"> 
  <tr>
    <td class="topichead" style="text-align:left; vertical-align:bottom">
      <p class="sync-toc">&lt;&lt; <a rel="nofollow" href="RigPi.html?fail2ban.html" target="_top">Click to Display Table of Contents</a> &gt;&gt;</p>
      <p class="crumbs"><b>Navigation:</b>&nbsp;
      
      <a href="chapter-2.html">Other Programs</a>&nbsp;&gt;</p>
   
      <h1 class="p_Heading1" style="page-break-after: avoid;"><span class="f_Heading1">Fail2Ban</span></h1>

    </td>
    <td class="topichead" id="idnav">
      
      <a href="contour-shuttlexpress.html" title="Previous Topic"><span class="hmbtnprev"></span></a>
      <a href="chapter-2.html" title="Parent Chapter"><span class="hmbtntop"></span></a>
      <a href="fan-control.html" title="Next Topic"><span class="hmbtnnext"></span></a>
      <a id="printbuttonlink" onclick=";$('div#idcontent').css('margin-top', '1em');window.print();$('#idcontent').css('margin-top', $('#idheader').height());" title="Print"><span class="hmbtnprint"></span></a>
    </td>
  </tr>  
</table>
</div>
</div>  

<div id="idcontent"><div id="innerdiv">
<!-- Ask Internet Explorer 6.users to update their obsolete and dangerous browser --> 
<!--[if lt IE 7]><div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;'><a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode"><img src="http://storage.ie6countdown.com/assets/100/images/banners/warning_bar_0000_us.jpg" border="0" height="42" width="820" alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today." /></a></div><![endif]-->

<!--ZOOMRESTART-->
<p class="p_Normal">Fail2ban, included with RigPi is an open-source intrusion prevention software that helps protect Linux-based systems from malicious attacks by monitoring log files and automatically taking action against potential threats. It works by detecting patterns of suspicious or unauthorized activity in log files and then blocking or banning the IP addresses associated with those activities.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">Here's how Fail2ban typically operates:</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">1. Log File Monitoring: Fail2ban continuously monitors log files (e.g., system logs, web server logs, SSH logs) for specific patterns or events that indicate malicious activities such as failed login attempts, brute-force attacks, or other suspicious behavior.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">2. Pattern Matching and Filters: Fail2ban uses regular expressions and predefined filters to analyze log entries and identify patterns of malicious activity. These filters define what constitutes a security breach or violation.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">3. Ban Actions: Once a pattern is detected, Fail2ban takes action by temporarily or permanently blocking the offending IP address or range of addresses associated with the suspicious activity. This prevents further access from those sources.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">4. Dynamic Ban Duration: Fail2ban typically imposes a temporary ban on the banned IP address for a configurable period. This dynamic ban duration helps protect against repeated or prolonged attacks.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">5. Ban Actions Configuration: Fail2ban provides flexibility in defining the actions to be taken upon detection of malicious activity. This can include blocking IP addresses via firewall rules (e.g., iptables), sending notifications, or executing custom scripts.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">6. Monitoring and Unbanning: Fail2ban keeps track of banned IP addresses and can automatically remove bans after the specified ban duration expires. It also provides tools for manual management, allowing administrators to unban specific IP addresses if necessary.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">Fail2ban is commonly used to enhance the security of Linux servers, protecting services such as SSH, FTP, web servers, and more. By automatically detecting and responding to malicious activities, Fail2ban helps mitigate the risk of unauthorized access and potential system compromise.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">Here is a simple guide to using fail2ban:</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">1. Configure Fail2ban:</p>
<p class="p_Normal"> &nbsp; - Open the Fail2ban configuration file using the nano text editor:</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal" style="margin: 0 0 0 26px;"> &nbsp; &nbsp; sudo nano /etc/fail2ban/jail.local</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"> &nbsp; - Customize the configuration based on your needs. Some important settings to consider:</p>
<p class="p_Normal"> &nbsp; &nbsp; - `ignoreip`: Specify IP addresses or ranges to exclude from banning.</p>
<p class="p_Normal"> &nbsp; &nbsp; - `bantime`: Set the duration (in seconds) for which an IP address is banned.</p>
<p class="p_Normal"> &nbsp; &nbsp; - `maxretry`: Define the maximum number of login attempts allowed before an IP is banned.</p>
<p class="p_Normal"> &nbsp; &nbsp; - Configure jail sections for the services you want to protect (e.g., SSH, Apache, etc.). Each jail section contains settings specific to that service.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"> &nbsp; - Save the configuration file and exit the text editor.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">2. Enable and Start Fail2ban:</p>
<p class="p_Normal"> &nbsp; - Enable Fail2ban to start automatically on system boot:</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal" style="margin: 0 0 0 13px;"> &nbsp; &nbsp; sudo systemctl enable fail2ban</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"> &nbsp; - Start the Fail2ban service:</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal" style="margin: 0 0 0 13px;"> &nbsp; &nbsp; sudo systemctl start fail2ban</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">3. Monitor Fail2ban:</p>
<p class="p_Normal"> &nbsp; - Check the status of Fail2ban to ensure it is running without errors:</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal" style="margin: 0 0 0 13px;"> &nbsp; &nbsp; sudo systemctl status fail2ban</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"> &nbsp; - Monitor the logs for any banned IP addresses or other relevant information:</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"> &nbsp; &nbsp; sudo tail -f /var/log/fail2ban.log</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">4. Customize Actions (Optional):</p>
<p class="p_Normal"> &nbsp; - Fail2ban provides various actions that can be customized, such as sending email notifications or executing custom scripts. You can modify these actions in the configuration file (`jail.local`) or create additional action files in the `action.d` directory.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">6. Testing:</p>
<p class="p_Normal"> &nbsp; - You can test Fail2ban by intentionally triggering a banned action, such as attempting multiple failed SSH login attempts. Make sure to do this from a different IP address to avoid accidentally banning yourself.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">That's it! Fail2ban will now monitor your system logs and automatically ban IP addresses that match the configured patterns. You can further customize Fail2ban's behavior and explore advanced options as needed. Remember to periodically review Fail2ban's logs and adjust the configuration based on your system's requirements.</p>

<!--ZOOMSTOP-->
</div></div>
<script type="text/javascript">

  $(document).ready(function(){
    $(window).bind('resize', function() {
      var y = $('#idheader').height(); 
      $('#idcontent').css('margin-top', y);
      var par = window.parent;
      if ($( par ).width() <= $( window ).width()+20) {
        $('#idheader').css('position', 'relative');
        $('#idcontent').css('margin-top', 0);
        $('#idbacktotop').css('display', 'block');
        $('.hmanchor').css('margin-top', -20);
	$('.hmanchor').css('padding-top', 20);
      }
      else {
        $('#idheader').css('position', 'fixed');
        $('#idcontent').css('margin-top', $('#idheader').height());
        $('#idbacktotop').css('display', 'none');
        $('.hmanchor').css('margin-top', -y-20);
	$('.hmanchor').css('padding-top', y+20);
      }
    });
    
    //Hide Print button on touch devices
    if (hmBrowser.nonDeskTouch) {
      $("a#printbuttonlink").hide();
      $("#idnav").css({"width": "125px", "padding-left": "0", "padding-right": "2px"});
    }
    $(window).resize(); //trigger event for initially small displays
  });

if ((!parent.hmNavigationFrame) && (parent.location) && (parent.location.href)) { $('.sync-toc').show();$('p.crumbs').hide();}

</script>
</body>
</html>
